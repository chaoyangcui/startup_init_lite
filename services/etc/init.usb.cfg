{
    "jobs" : [{
            "name" : "post-fs-data",
            "cmds" : [
                "chown system system /sys/class/android_usb/android0/f_mass_storage/lun/file",
                "chmod 0660 /sys/class/android_usb/android0/f_mass_storage/lun/file",
                "chown system system /sys/class/android_usb/android0/f_rndis/ethaddr",
                "chmod 0660 /sys/class/android_usb/android0/f_rndis/ethaddr",
                "mkdir /data/misc/adb 02750 system shell",
                "mkdir /data/adb 0700 root root",
                "start adbd"
            ]
        }, {
            "name" : "boot",
            "cmds" : [
                "setparam sys.usb.configfs 0"
            ]
        }, {
            "name" : "property:sys.usb.config=none && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=none && sys.usb.configfs=0",
            "cmds" : [
                "stop adbd",
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/bDeviceClass 0",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=adb && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=adb && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 4EE7",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "start adbd",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=accessory && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=accessory && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d00",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=accessory,adb && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=accessory,adb && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d01",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "start adbd",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=audio_source && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=audio_source && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d02",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=audio_source,adb && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=audio_source,adb && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d03",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "start adbd",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=accessory,audio_source && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=accessory,audio_source && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d04",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.config=accessory,audio_source,adb && property:sys.usb.configfs=0",
            "condition" : "sys.usb.config=accessory,audio_source,adb && sys.usb.configfs=0",
            "cmds" : [
                "write /sys/class/android_usb/android0/enable 0",
                "write /sys/class/android_usb/android0/idVendor 18d1",
                "write /sys/class/android_usb/android0/idProduct 2d05",
                "write /sys/class/android_usb/android0/functions ${sys.usb.config}",
                "write /sys/class/android_usb/android0/enable 1",
                "start adbd",
                "setparam sys.usb.state ${sys.usb.config}"
            ]
        }, {
            "name" : "property:sys.usb.typec.mode=dfp",
            "condition" : "sys.usb.typec.mode=dfp",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/mode ${sys.usb.typec.mode}",
                "setparam sys.usb.typec.state ${sys.usb.typec.mode}"
            ]
        }, {
            "name" : "property:sys.usb.typec.mode=ufp",
            "condition" : "sys.usb.typec.mode=ufp",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/mode ${sys.usb.typec.mode}",
                "setparam sys.usb.typec.state ${sys.usb.typec.mode}"
            ]
        }, {
            "name" : "property:sys.usb.typec.data_role=device",
            "condition" : "sys.usb.typec.data_role=device",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/data_role ${sys.usb.typec.data_role}",
                "setparam sys.usb.typec.state ${sys.usb.typec.data_role}"
            ]
        }, {
            "name" : "property:sys.usb.typec.data_role=host",
            "condition" : "sys.usb.typec.data_role=host",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/data_role ${sys.usb.typec.data_role}",
                "setparam sys.usb.typec.state ${sys.usb.typec.data_role}"
            ]
        }, {
            "name" : "property:sys.usb.typec.power_role=source",
            "condition" : "sys.usb.typec.power_role=source",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/power_role ${sys.usb.typec.power_role}",
                "setparam sys.usb.typec.state ${sys.usb.typec.power_role}"
            ]
        }, {
            "name" : "property:sys.usb.typec.power_role=sink",
            "condition" : "sys.usb.typec.power_role=sink",
            "cmds" : [
                "write /sys/class/dual_role_usb/otg_default/power_role ${sys.usb.typec.power_role}",
                "setparam sys.usb.typec.state ${sys.usb.typec.power_role}"
            ]
        }
    ],
    "services" : [{
            "name" : "adbd",
            "path" : ["/system/bin/hdcd"],
            "socket" : [
                "adbd seqpacket 660 system system false"
            ],
            "disabled" : 1
        }
    ]
}
